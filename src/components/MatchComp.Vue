<template>
    <div :id="matchname">
        <table>
            <thead>
                <tr>
                    <th>
                        Player:
                    </th>
                    <th>
                        Runde 1
                    </th>
                    <th>
                        Runde 2
                    </th>
                    <th>
                        Runde 3
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        {{player1.name}}
                    </td>
                    <td>
                        <table class="flex">
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=1 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=2 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=3 ></TossComp>
                            </tr>
                        </table>
                        
                    </td>
                    <td>
                        <table class="flex">
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=4 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=5 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=6 ></TossComp>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table class="flex">
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=7 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=8 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player1.number" :tossnumber=9 ></TossComp>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{player2.name}}
                    </td>
                    <td>
                        <table class="flex">
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=1 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=2 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=3 ></TossComp>
                            </tr>
                        </table>
                        
                    </td>
                    <td>
                        <table class="flex">
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=4 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=5 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=6 ></TossComp>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table class="flex">
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=7 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=8 ></TossComp>
                            </tr>
                            <tr class="inline_grid">
                                <TossComp v-on:playerhit="playerhit" v-on:playermiss="playermiss" :playernumber="player2.number" :tossnumber=9 ></TossComp>
                            </tr>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>{{score_player1}}</p>
        <p>{{score_player2}}</p>
        <button v-on:click="addNewGame">Spiel abschlie√üen</button>
    </div>
</template>
<script>
import TossComp from './TossComp.vue';

export default {
    name: 'match',
    components: {TossComp},
    props: ['player1', 'player2','matchname','match'],
    data () {
        return {  
            score_player1: 0,
            score_player2: 0
        }
    },
    methods:{
        addNewGame: function (params) {
            
        },
        playerhit: function(args){
            console.log("Player: " + args[0] + " getroffen Wurf: " + args[1]);
            
            if (args[0] == 0) {
                this.match.player1_hits[args[1]] = 1;
                this.score_player1 = 0;
                for (let index = 0; index < this.match.player1_hits.length; index++) {
                    this.score_player1 += this.match.player1_hits[index];
                }
            }
            if(args[0] == 1){
                this.match.player2_hits[args[1]] = 1;

                this.score_player2 = 0;
                for (let index = 0; index < this.match.player2_hits.length; index++) {
                    this.score_player2 += this.match.player2_hits[index];
                }
            }
        },
        playermiss: function(args){
            console.log("Player: " + args[0] + " getroffen Wurf: " + args[1]);
            
            if(args[0] == 0){
                this.match.player1_hits[args[1]] = 0;

                this.score_player1 = 0;
                for (let index = 0; index < this.match.player1_hits.length; index++) {
                    this.score_player1 += this.match.player1_hits[index];
                }
            }
            if(args[0] == 1){
                this.match.player2_hits[args[1]] = 0;

                this.score_player2 = 0;
                for (let index = 0; index < this.match.player2_hits.length; index++) {
                    this.score_player2 += this.match.player2_hits[index];
                }
            }
        }
    }  
}
</script>
<style>
.flex{
    display: flex;
}
.inline_grid{
    display: inline-grid;
}
.hit{
    -webkit-appearance: none;
    border-radius: 50%;
    background-color: green;
}
.miss{
    border-radius: 50%;
    background-color: red;
}
</style>

